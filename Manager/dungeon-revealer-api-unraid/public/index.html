<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Dungeon Revealer Map Manager</title>
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <div class="header">
      <h1>ğŸ—ºï¸ Dungeon Revealer Map Manager</h1>
      <p>Manage thy maps with arcane power</p>
    </div>

    <div class="container">
      <div class="sidebar">
        <h3>Navigation</h3>
        <button class="btn primary" onclick="showDashboard()">
          <span class="btn-icon">ğŸ“Š</span>
          Dashboard
        </button>
        <button class="btn" onclick="showMapList()">
          <span class="btn-icon">ğŸ“‹</span>
          List Maps
        </button>
        <button class="btn success" onclick="showUpload()">
          <span class="btn-icon">â¬†ï¸</span>
          Upload Maps
        </button>

        <h3>Token Management</h3>
        <button class="btn" onclick="showTokenList()">
          <span class="btn-icon">ğŸ­</span>
          List Tokens
        </button>
        <button class="btn success" onclick="showTokenUpload()">
          <span class="btn-icon">â¬†ï¸</span>
          Upload Tokens
        </button>

        <h3>Note Import</h3>
        <button class="btn" onclick="showNoteImport()">
          <span class="btn-icon">ğŸ“</span>
          Import Monster Notes
        </button>

        <h3>Settings</h3>
        <button class="btn" onclick="showSettings()">
          <span class="btn-icon">âš™ï¸</span>
          Configuration
        </button>
      </div>

      <div class="content">
        <!-- Dashboard View -->
        <div id="dashboardView">
          <div class="card">
            <h2>ğŸ“Š Statistics</h2>
            <div class="stats-grid" id="statsGrid">
              <div class="stat-box">
                <div class="stat-label">Local Files</div>
                <div class="stat-value" id="localFilesCount">-</div>
              </div>
              <div class="stat-box">
                <div class="stat-label">Server Maps</div>
                <div class="stat-value" id="serverMapsCount">-</div>
              </div>
              <div class="stat-box">
                <div class="stat-label">Connection</div>
                <div
                  class="stat-value"
                  id="connectionStatus"
                  style="font-size: 18px"
                >
                  -
                </div>
              </div>
            </div>
            <button
              class="btn primary"
              onclick="refreshStats()"
              style="margin-top: 20px"
            >
              <span class="btn-icon">ğŸ”„</span>
              Refresh Statistics
            </button>
          </div>

          <div class="card">
            <h2>ğŸ¯ Quick Actions</h2>
            <div
              style="
                display: grid;
                grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
                gap: 16px;
              "
            >
              <button class="btn success" onclick="showUpload()">
                <span class="btn-icon">â¬†ï¸</span>
                Start Upload
              </button>
              <button class="btn" onclick="showMapList()">
                <span class="btn-icon">ğŸ“‹</span>
                View Maps
              </button>
              <button class="btn" onclick="showSettings()">
                <span class="btn-icon">âš™ï¸</span>
                Configure
              </button>
            </div>
          </div>

          <div class="card hidden" id="checkpointCard">
            <h2>ğŸ’¾ Checkpoint Found</h2>
            <div class="alert warning">
              <span>âš ï¸</span>
              <span
                >Previous upload session detected. You can resume from where you
                left off.</span
              >
            </div>
            <div
              style="
                display: grid;
                grid-template-columns: repeat(4, 1fr);
                gap: 16px;
                margin-top: 16px;
              "
            >
              <div class="stat-box">
                <div class="stat-label">Processed</div>
                <div
                  class="stat-value"
                  id="cpProcessed"
                  style="font-size: 20px"
                >
                  0
                </div>
              </div>
              <div class="stat-box">
                <div class="stat-label">Success</div>
                <div
                  class="stat-value"
                  id="cpSuccess"
                  style="font-size: 20px; color: #3d6b3d"
                >
                  0
                </div>
              </div>
              <div class="stat-box">
                <div class="stat-label">Skipped</div>
                <div
                  class="stat-value"
                  id="cpSkipped"
                  style="font-size: 20px; color: #9e7f5c"
                >
                  0
                </div>
              </div>
              <div class="stat-box">
                <div class="stat-label">Failed</div>
                <div
                  class="stat-value"
                  id="cpFailed"
                  style="font-size: 20px; color: #a02c2c"
                >
                  0
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Map List View -->
        <div id="mapListView" class="hidden">
          <div class="card">
            <h2>ğŸ“‹ Server Maps</h2>
            <button class="btn primary" onclick="loadMaps()" id="loadMapsBtn">
              <span class="btn-icon">ğŸ”„</span>
              Load Maps
            </button>
            <div id="mapListContainer" class="hidden">
              <p style="margin: 20px 0; color: #5c4a33; font-weight: 600">
                Total Maps: <strong id="mapCount">0</strong>
              </p>
              <div class="map-list" id="mapList"></div>
            </div>
          </div>
        </div>

        <!-- Upload View -->
        <div id="uploadView" class="hidden">
          <div class="card">
            <h2>â¬†ï¸ Batch Upload Maps</h2>
            <div class="alert info">
              <span>â„¹ï¸</span>
              <span
                >Upload feature coming soon! This will scan your configured
                directory and upload all images to the server.</span
              >
            </div>
            <button
              class="btn success"
              onclick="alert('Upload feature is under development')"
              id="uploadBtn"
              disabled
            >
              <span class="btn-icon">ğŸš€</span>
              Start Upload (Coming Soon)
            </button>
          </div>
        </div>

        <!-- Settings View -->
        <div id="settingsView" class="hidden">
          <div class="card">
            <h2>âš™ï¸ Configuration</h2>
            <form id="configForm" onsubmit="saveSettings(event)">
              <div class="form-group">
                <label class="form-label">Server URL</label>
                <input
                  type="text"
                  class="form-input"
                  id="serverUrl"
                  placeholder="http://192.168.0.50:3000"
                />
              </div>
              <div class="form-group">
                <label class="form-label">DM Password</label>
                <input
                  type="password"
                  class="form-input"
                  id="dmPassword"
                  placeholder="Enter password"
                />
              </div>
              <div class="form-group">
                <label class="form-label">Scan Directory (Server Path)</label>
                <input
                  type="text"
                  class="form-input"
                  id="scanDirectory"
                  placeholder="/data/Assets/Maps"
                />
                <small
                  style="
                    color: #5c4a33;
                    font-size: 12px;
                    margin-top: 4px;
                    display: block;
                  "
                  >Path on the Docker container</small
                >
              </div>
              <div class="form-group">
                <label class="form-label">Token Directory (Server Path)</label>
                <input
                  type="text"
                  class="form-input"
                  id="tokenDirectory"
                  placeholder="/data/Assets/Tokens"
                />
                <small
                  style="
                    color: #5c4a33;
                    font-size: 12px;
                    margin-top: 4px;
                    display: block;
                  "
                  >Path on the Docker container</small
                >
              </div>
              <div class="form-group">
                <div class="checkbox-group">
                  <input type="checkbox" id="skipExisting" />
                  <label class="form-label" for="skipExisting" style="margin: 0"
                    >Skip existing maps</label
                  >
                </div>
              </div>
              <div class="form-group">
                <label class="form-label">Checkpoint Interval</label>
                <input
                  type="number"
                  class="form-input"
                  id="checkpointInterval"
                  placeholder="25"
                  min="1"
                />
                <small
                  style="
                    color: #5c4a33;
                    font-size: 12px;
                    margin-top: 4px;
                    display: block;
                  "
                  >Save progress every N maps</small
                >
              </div>
              <button type="submit" class="btn success">
                <span class="btn-icon">ğŸ’¾</span>
                Save Configuration
              </button>
            </form>
          </div>
        </div>

        <!-- Token List View -->
        <div id="tokenListView" class="hidden">
          <div class="card">
            <h2>ğŸ­ Server Tokens</h2>
            <div style="display: flex; gap: 12px; margin-bottom: 20px">
              <input
                type="text"
                class="form-input"
                id="tokenSearchInput"
                placeholder="Search tokens by name..."
                style="flex: 1"
              />
              <button
                class="btn primary"
                onclick="loadTokens()"
                id="loadTokensBtn"
              >
                <span class="btn-icon">ğŸ”„</span>
                Load Tokens
              </button>
            </div>
            <div id="tokenListContainer" class="hidden">
              <p style="margin: 20px 0; color: #5c4a33; font-weight: 600">
                Total Tokens: <strong id="tokenCount">0</strong>
              </p>
              <div class="token-grid" id="tokenGrid"></div>
              <div
                id="tokenLoadMore"
                class="hidden"
                style="text-align: center; margin-top: 20px"
              >
                <button class="btn" onclick="loadMoreTokens()">
                  <span class="btn-icon">â¬‡ï¸</span>
                  Load More
                </button>
              </div>
            </div>
          </div>
        </div>

        <!-- Token Upload View -->
        <div id="tokenUploadView" class="hidden">
          <div class="card">
            <h2>â¬†ï¸ Batch Upload Tokens</h2>
            <div class="alert info">
              <span>â„¹ï¸</span>
              <span>Upload feature coming soon!</span>
            </div>
            <button
              class="btn success"
              onclick="alert('Upload feature is under development')"
              disabled
            >
              <span class="btn-icon">ğŸš€</span>
              Start Token Upload (Coming Soon)
            </button>
          </div>
        </div>

        <!-- Note Import View -->
        <div id="noteImportView" class="hidden">
          <div class="card">
            <h2>ğŸ“ Import Monster Notes</h2>
            <div class="alert info">
              <span>â„¹ï¸</span>
              <span>Feature coming soon!</span>
            </div>
          </div>
        </div>
      </div>
    </div>

    <script src="app.js"></script>
  </body>
</html>
